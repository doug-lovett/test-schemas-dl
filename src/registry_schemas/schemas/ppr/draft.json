{
    "definitions": {},
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://bcrs.gov.bc.ca/.well_known/schemas/ppr/draft",
    "type": "object",
    "title": "The PPR Draft Schema",
    "properties": {
        "type": {
            "type": "string",
            "maxLength": 20,
            "enum": ["AMENDMENT_STATEMENT", "CHANGE_STATEMENT", "FINANCING_STATEMENT"]
        },
        "financingStatement": {
            "$ref": "https://bcrs.gov.bc.ca/.well_known/schemas/ppr/financingStatement"
        },
        "amendmentStatement": {
            "$ref": "https://bcrs.gov.bc.ca/.well_known/schemas/ppr/amendmentStatement"
        },
        "changeStatement": {
            "$ref": "https://bcrs.gov.bc.ca/.well_known/schemas/ppr/changeStatement"
        },
        "createDateTime": {
            "type": [ "string", "null" ],
            "format": "date-time",
            "description": "Generated by the PPR system and included in a response, the date and time a record is created in the system."
        },
        "lastUpdateDateTime": {
            "type": [ "string", "null" ],
            "format": "date-time",
            "description": "Generated by the PPR system, the date and time of the last change to the draft. Null if no update is made."
        }
    },
    "oneOf":[
        {
            "properties": {
                "type": { "const": "AMENDMENT_STATEMENT" }
            },
            "required": [
                "type",
                "amendmentStatement"
            ]
        },
        {
            "properties": {
                "type": { "const": "CHANGE_STATEMENT" }
            },
            "required": [
                "type",
                "changeStatement"
            ]
        },
        {
            "properties": {
                "type": { "const": "FINANCING_STATEMENT" }
            },
            "required": [
                "type",
                "financingStatement"
            ]
        }
    ],
    "not": {
        "anyOf":[
            {
                "required": [
                    "financingStatement",
                    "changeStatement",
                    "amendmentStatement"
                ]
            },
            {
                "required": [
                    "financingStatement",
                    "amendmentStatement"
                ]
            },
            {
                "required": [
                    "financingStatement",
                    "changeStatement"
                ]
            },
            {
                "required": [
                    "changeStatement",
                    "amendmentStatement"
                ]
            }
        ]
    }
}